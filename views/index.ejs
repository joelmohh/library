<%- include('partials/head') %>

<div class="container mt-4">
    <div class="search-box">
        <div class="search-fields">
            <input type="text" id="searchInputBooks" class="form-control search-field" placeholder="Search by title, author, or ISBN">
            <button id="searchBtnBooks" class="btn btn-secondary">
                <i class="fa-solid fa-magnifying-glass"></i> Search
            </button>
        </div>

        <div class="search-filters">
            <div class="form-field">
                <label for="availabilitySelect" class="form-label">Availability:</label>
                <select class="form-select" id="availabilitySelect">
                    <option value="">All</option>
                    <option value="available">Available</option>
                    <option value="unavailable">Not available</option>
                </select>
            </div>
        </div>

        <div class="books-render">
            <table class="table">
                <thead>
                    <tr>
                        <th scope="col">Title</th>
                        <th scope="col">Author</th>
                        <th scope="col">Category</th>
                        <th scope="col">Availability</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <% if (books.length === 0) { %>
                        <tr id="no-result-tableBody">
                            <td colspan="4" class="text-center">
                                Nenhum livro encontrado.
                            </td>
                        </tr>
                    <% } else { %>
                        <% books.forEach(function(book) { %>
                            <tr class="item">
                                <td><%= book.title %></td>
                                <td><%= book.author %></td>
                                <td><%= book.category %></td>
                                <td>
                                    <% if(book.disponible){ %>
                                        <span class="text-success">Available</span> 
                                    <% } else { %>
                                        <span class="text-danger">Not available</span>
                                    <% } %>
                                </td>
                            </tr>
                        <% }); %>
                    <% } %>
                </tbody>
            </table>
        </div>

        <div class="pagination-wrapper">
            <div class="items-controller">
                <label for="rowsPerPage">Items per page:</label>
                <select class="form-select" id="rowsPerPage">
                    <option value="5">5</option>
                    <option value="10" selected>10</option>
                    <option value="20">20</option>
                    <option value="50">50</option>
                </select>
            </div>

            <nav aria-label="Page navigation">
                <ul class="pagination mb-0" id="paginationContainer">
                    <li class="page-item" id="btn-prev">
                        <a class="page-link" href="#" aria-label="Previous">
                            <span aria-hidden="true"><i class="fa-solid fa-angles-left"></i></span>
                        </a>
                    </li>

                    <li class="page-item" id="btn-next">
                        <a class="page-link" href="#" aria-label="Next">
                            <span aria-hidden="true"><i class="fa-solid fa-angles-right"></i></span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

<script src="/js/pagination.js"></script>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        initTablePagination('tableBody', 'rowsPerPage', 'paginationContainer','btn-prev','btn-next');
        initTableSearch('searchInputBooks','searchBtnBooks','tableBody');
    });
</script>

<%- include('partials/footer') %>